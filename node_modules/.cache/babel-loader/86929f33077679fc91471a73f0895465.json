{"ast":null,"code":"// IMPORT NPM\nimport React from\"react\";import{Icon,Button}from\"semantic-ui-react\";import{NavLink,useNavigate}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";// IMPORT ASSETS\nimport SearchBar from\"../SearchBar\";import ModalCreate from\"./ModalCreate\";import ModalConnexion from\"./ModalConnexion\";import{setUserField,login,creatUser,logout,getUserWithSlug}from'../../actions/user';import{search,setResearchField}from\"../../actions/research\";import Logo from'./logo-v.png';import\"./styles.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavBar=function NavBar(_ref){var research=_ref.research;var dispatch=useDispatch();var navigate=useNavigate();// on récupère depuis le store les valeurs courantes\n// d'email et password\nvar email=useSelector(function(state){return state.users.email;});var name=useSelector(function(state){return state.users.name;});var password=useSelector(function(state){return state.users.password;});var userData=useSelector(function(state){return state.users.user;});var logged=useSelector(function(state){return state.users.logged;});var errorCode=useSelector(function(state){return state.users.errorCodeMail;});var role=useSelector(function(state){return state.users.user.roles;});var changeField=function changeField(value,name){dispatch(setUserField(value,name));};var handleLogin=function handleLogin(){dispatch(login());// console.log('etape : 2, je passe par le handleLogin vers le middleware login');\n};var handleCreate=function handleCreate(){dispatch(creatUser());};var handleLogout=function handleLogout(){dispatch(logout());navigate('/');window.location.reload();};var changeFieldSearch=function changeFieldSearch(value,name){dispatch(setResearchField(value,name));};var handleSearch=function handleSearch(){dispatch(search());};var handleOnClickUser=function handleOnClickUser(){dispatch(getUserWithSlug(userData.slug));navigate(\"/user/\".concat(userData.slug));};return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar__container\",children:[/*#__PURE__*/_jsx(NavLink,{to:\"/\",children:/*#__PURE__*/_jsx(\"div\",{className:\"navbar__logo\",style:{\"backgroundImage\":\"url(\".concat(Logo,\")\")}})}),/*#__PURE__*/_jsx(\"div\",{className:\"searchbar-container\",children:/*#__PURE__*/_jsx(SearchBar,{research:research,changeField:changeFieldSearch,handleSearch:handleSearch})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar__buttons-container\",children:[!logged&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ModalCreate,{errorCode:errorCode,username:name,password:password,email:userData.email,changeField:changeField,handleCreate:handleCreate})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ModalConnexion,{email:email,password:password,changeField:changeField,handleLogin:handleLogin})})]}),logged&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Button,{onClick:handleOnClickUser,className:\"navbar__buttons--user\",children:[/*#__PURE__*/_jsx(Icon,{name:\"user circle\",className:\"navbar__buttons--icon navbar__buttons--icon-user\"}),/*#__PURE__*/_jsx(\"span\",{className:\"navbar__buttons--user-text\",children:userData.name})]}),role['0']==='ROLE_ADMIN'&&/*#__PURE__*/_jsxs(Button,{href:\"http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/back/user/\",color:\"blue\",className:\"navbar__buttons--admin\",children:[/*#__PURE__*/_jsx(Icon,{name:\"user secret\",className:\"navbar__buttons--icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"navbar__buttons--user-text\",children:\"Admin\"})]}),/*#__PURE__*/_jsxs(Button,{color:\"teal\",onClick:handleLogout,className:\"navbar__buttons--logout\",children:[/*#__PURE__*/_jsx(Icon,{name:\"log out\",className:\"navbar__buttons--icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"navbar__buttons--user-text\",children:\"D\\xE9connexion\"})]})]})]})]});};export default NavBar;","map":{"version":3,"sources":["/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/components/Header/NavBar.js"],"names":["React","Icon","Button","NavLink","useNavigate","useSelector","useDispatch","SearchBar","ModalCreate","ModalConnexion","setUserField","login","creatUser","logout","getUserWithSlug","search","setResearchField","Logo","NavBar","research","dispatch","navigate","email","state","users","name","password","userData","user","logged","errorCode","errorCodeMail","role","roles","changeField","value","handleLogin","handleCreate","handleLogout","window","location","reload","changeFieldSearch","handleSearch","handleOnClickUser","slug"],"mappings":"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","sourcesContent":["// IMPORT NPM\nimport React from \"react\";\nimport { Icon, Button  } from \"semantic-ui-react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\n// IMPORT ASSETS\nimport SearchBar from \"../SearchBar\";\nimport ModalCreate from \"./ModalCreate\";\nimport ModalConnexion from \"./ModalConnexion\";\nimport { setUserField, login, creatUser, logout, getUserWithSlug } from '../../actions/user';\nimport { search, setResearchField } from \"../../actions/research\";\nimport Logo from './logo-v.png';\nimport \"./styles.scss\";\n\nconst NavBar = ({research}) => {\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  // on récupère depuis le store les valeurs courantes\n  // d'email et password\n  const email = useSelector((state) => state.users.email);\n  const name = useSelector((state) => state.users.name);\n  const password = useSelector((state) => state.users.password);\n  const userData = useSelector((state) => state.users.user);\n\n  const logged = useSelector((state) => state.users.logged);\n  const errorCode = useSelector((state) => state.users.errorCodeMail);\n\n  const role = useSelector((state) => state.users.user.roles);\n\n  const changeField = (value, name) => {\n    dispatch(setUserField(value, name));\n  };\n\n  const handleLogin = () => {\n    dispatch(login());\n    // console.log('etape : 2, je passe par le handleLogin vers le middleware login');\n \n  };\n  const handleCreate = () => {\n    dispatch(creatUser())\n  }\n  const handleLogout = () => {\n    dispatch(logout());    \n    navigate('/');\n    window.location.reload(); \n  }\n  const changeFieldSearch = (value, name) => {\n    dispatch(setResearchField(value, name));\n  };\n  const handleSearch = () => {\n    dispatch(search());\n  }\n\n  const handleOnClickUser = () => {\n    dispatch(getUserWithSlug(userData.slug));\n    navigate(`/user/${userData.slug}`);\n  }\n  \n  return( \n    <nav className=\"navbar__container\">\n\n      <NavLink to=\"/\">\n      <div className=\"navbar__logo\" style={{ \"backgroundImage\": `url(${Logo})` }} />\n      </NavLink>  \n\n      <div className=\"searchbar-container\">\n        <SearchBar\n          research={research}\n          changeField={changeFieldSearch}\n          handleSearch={handleSearch}\n        />\n        \n      </div>\n      \n      <div className=\"navbar__buttons-container\">\n        {/* Account Creation and Login button, only visible if not connected to account */}\n        {(!logged) && \n        <>\n          <div>\n          <ModalCreate \n            errorCode={errorCode}\n            username={name}\n            password={password}\n            email={userData.email}\n            changeField={changeField}\n            handleCreate={handleCreate}\n          />\n        </div>\n        <div>\n          <ModalConnexion \n            email={email}\n            password={password}\n            changeField={changeField}\n            handleLogin={handleLogin}\n          />\n  \n        </div>\n        </>\n        }\n        {(logged) && \n\n          <>\n          <Button onClick={handleOnClickUser} className='navbar__buttons--user'>\n            <Icon name=\"user circle\" className='navbar__buttons--icon navbar__buttons--icon-user' />\n            <span className=\"navbar__buttons--user-text\">{userData.name}</span>\n          </Button>\n        \n          {(role['0'] === 'ROLE_ADMIN') &&\n          <Button \n            href=\"http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/back/user/\" color=\"blue\" className=\"navbar__buttons--admin\">\n            <Icon name=\"user secret\" className='navbar__buttons--icon' />\n            <span className=\"navbar__buttons--user-text\">Admin</span>\n          </Button>\n          }\n          \n          <Button color=\"teal\" onClick={handleLogout} className='navbar__buttons--logout'>\n            <Icon name=\"log out\" className='navbar__buttons--icon' />\n            <span className=\"navbar__buttons--user-text\">Déconnexion</span>\n          </Button>\n        </>    \n        }\n        \n      </div>\n\n    </nav>\n  );\n\n}\n\nexport default NavBar;"]},"metadata":{},"sourceType":"module"}