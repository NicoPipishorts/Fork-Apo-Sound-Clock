{"ast":null,"code":"// == IMPORT NPM\nimport axios from \"axios\"; // == IMPORT ASSETS\n\nimport { CREATE_USER, GET_USERS_LIST, setUsersList, GET_TOP_USERS_LIST, setTopUsersList } from '../actions/user';\n\nconst usersApi = store => next => action => {\n  const {\n    users: {\n      email,\n      name,\n      password\n    }\n  } = store.getState();\n  const config = {\n    headers: {\n      \"Content-type\": \"application/json\"\n    }\n  };\n\n  switch (action.type) {\n    case CREATE_USER:\n      axios.post('http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/user/new', {\n        email,\n        name,\n        password\n      }, config).then(response => {\n        console.log('Le data a était envoyé, all is good.', response);\n      }).catch(error => {\n        console.log('error nul', error);\n      });\n      break;\n\n    case GET_USERS_LIST:\n      axios.get('http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/users').then(response => {\n        store.dispatch(setUsersList(response.data));\n      }).catch(error => {\n        // eslint-disable-next-line no-console\n        console.log('error', error);\n      });\n      break;\n\n    case GET_TOP_USERS_LIST:\n      axios.get('http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/users/rand').then(response => {\n        store.dispatch(setTopUsersList(response.data));\n      }).catch(error => {\n        console.log('error top users', error);\n      });\n      break;\n\n    default:\n      next(action);\n  }\n};\n\nexport default usersApi;","map":{"version":3,"sources":["/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/middlewares/usersApi.js"],"names":["axios","CREATE_USER","GET_USERS_LIST","setUsersList","GET_TOP_USERS_LIST","setTopUsersList","usersApi","store","next","action","users","email","name","password","getState","config","headers","type","post","then","response","console","log","catch","error","get","dispatch","data"],"mappings":"AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;;AACA,SACEC,WADF,EAEEC,cAFF,EAGEC,YAHF,EAIEC,kBAJF,EAKEC,eALF,QAMO,iBANP;;AAQA,MAAMC,QAAQ,GAAIC,KAAD,IAAYC,IAAD,IAAWC,MAAD,IAAW;AAE/C,QAAM;AAAEC,IAAAA,KAAK,EAAG;AACdC,MAAAA,KADc;AAEdC,MAAAA,IAFc;AAGdC,MAAAA;AAHc;AAAV,MAIDN,KAAK,CAACO,QAAN,EAJL;AAMA,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AADI,GAAf;;AAOA,UAAQP,MAAM,CAACQ,IAAf;AACE,SAAKhB,WAAL;AACED,MAAAA,KAAK,CAACkB,IAAN,CAAW,oFAAX,EAAkG;AAChGP,QAAAA,KADgG;AAEhGC,QAAAA,IAFgG;AAGhGC,QAAAA;AAHgG,OAAlG,EAIGE,MAJH,EAKII,IALJ,CAKUC,QAAD,IAAc;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ,EAAmDF,QAAnD;AACD,OAPH,EAQGG,KARH,CAQUC,KAAD,IAAW;AAChBH,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBE,KAAzB;AACD,OAVH;AAWA;;AAEF,SAAKtB,cAAL;AACEF,MAAAA,KAAK,CAACyB,GAAN,CAAU,iFAAV,EACCN,IADD,CACOC,QAAD,IAAc;AAChBb,QAAAA,KAAK,CAACmB,QAAN,CAAevB,YAAY,CAACiB,QAAQ,CAACO,IAAV,CAA3B;AACD,OAHH,EAICJ,KAJD,CAIQC,KAAD,IAAW;AACd;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBE,KAArB;AACD,OAPH;AAQE;;AAEJ,SAAKpB,kBAAL;AACEJ,MAAAA,KAAK,CAACyB,GAAN,CAAU,sFAAV,EACCN,IADD,CACOC,QAAD,IAAc;AAElBb,QAAAA,KAAK,CAACmB,QAAN,CAAerB,eAAe,CAACe,QAAQ,CAACO,IAAV,CAA9B;AACD,OAJD,EAKCJ,KALD,CAKQC,KAAD,IAAW;AAChBH,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BE,KAA/B;AACD,OAPD;AAQA;;AACF;AACAhB,MAAAA,IAAI,CAACC,MAAD,CAAJ;AArCF;AAuCD,CAtDD;;AAuDA,eAAeH,QAAf","sourcesContent":["// == IMPORT NPM\nimport axios from \"axios\";\n\n// == IMPORT ASSETS\nimport {\n  CREATE_USER,\n  GET_USERS_LIST, \n  setUsersList,\n  GET_TOP_USERS_LIST,\n  setTopUsersList\n} from '../actions/user';\n\nconst usersApi = (store) => (next) => (action) =>{\n\n  const { users : {\n    email,\n    name,\n    password\n  }} = store.getState();\n\n  const config = {\n    headers: {\n      \"Content-type\": \"application/json\"\n    }\n  };\n\n\n  switch (action.type) {\n    case CREATE_USER:\n      axios.post('http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/user/new' , {\n        email,\n        name,\n        password  \n      }, config\n        ).then((response) => {\n          console.log('Le data a était envoyé, all is good.',response);\n        })\n        .catch((error) => {\n          console.log('error nul', error);\n        });\n      break;\n\n    case GET_USERS_LIST: \n      axios.get('http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/users')\n      .then((response) => {\n          store.dispatch(setUsersList(response.data));\n        })\n      .catch((error) => {\n          // eslint-disable-next-line no-console\n          console.log('error', error);\n        });\n        break;\n\n    case GET_TOP_USERS_LIST:\n      axios.get('http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/users/rand')\n      .then((response) => {\n        \n        store.dispatch(setTopUsersList(response.data));\n      })\n      .catch((error) => {\n        console.log('error top users', error);\n      });\n      break;\n    default:\n    next(action);   \n  }\n};\nexport default usersApi;"]},"metadata":{},"sourceType":"module"}