{"ast":null,"code":"// == IMPORT NPM \nimport{useEffect}from'react';import{useDispatch}from'react-redux';import{Routes,Route}from'react-router-dom';import{useNavigate}from'react-router-dom';// == IMPORT ASSETS\nimport Header from'../Header';import Legal from'../Legal';import Footer from'../Footer';import ParallaxMain from'../Parallax';import Columns from'../Columns';import About from'../About';import Playlist from'../Playlist';import Results from'../Results';import Contact from'../Contact';import User from'../User';import Error from'../Error';//import SearchBar from '../SearchBar';\nimport'./styles.scss';import{getMusicsList}from'../../actions/musics';import{getUsersList,getLoggedUser}from'../../actions/user';import{getPlaylistsList}from'../../actions/playlist';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var dispatch=useDispatch();var navigate=useNavigate();var baseApiUrl='http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/uploads';/*\n  //* useParams used to pickup the slug is the user is not logged\n  const { slug } = useParams();\n  */useEffect(function(){dispatch(getMusicsList());dispatch(getUsersList());dispatch(getPlaylistsList());});useEffect(function(){var loggedInUser=localStorage.getItem(\"userToken\");if(loggedInUser){//* DECOMPRESSION OF PAYLOAD\nvar base64Url=loggedInUser.split('.')[1];var base64=base64Url.replace(/-/g,'+').replace(/_/g,'/');var jsonPayload=decodeURIComponent(atob(base64).split('').map(function(c){return'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2);}).join(''));var payload=JSON.parse(jsonPayload);//console.log('Je suis le payload du get logged user: ' , payload);\ndispatch(getLoggedUser(payload.slug));}});var handleOnClickUser=function handleOnClickUser(slug){// dispatch(getUserWithSlug(slug));\nnavigate(\"/user/\".concat(slug));};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ParallaxMain,{}),/*#__PURE__*/_jsx(Columns,{handleOnClickUser:handleOnClickUser,baseApiUrl:baseApiUrl})]})}),/*#__PURE__*/_jsx(Route,{path:\"/legal\",element:/*#__PURE__*/_jsx(Legal,{baseApiUrl:baseApiUrl})}),/*#__PURE__*/_jsx(Route,{path:\"/contact\",element:/*#__PURE__*/_jsx(Contact,{baseApiUrl:baseApiUrl})}),/*#__PURE__*/_jsx(Route,{path:\"/results\",element:/*#__PURE__*/_jsx(Results,{baseApiUrl:baseApiUrl})}),/*#__PURE__*/_jsx(Route,{path:\"/playlist/:playlist\",element:/*#__PURE__*/_jsx(Playlist,{baseApiUrl:baseApiUrl})}),/*#__PURE__*/_jsx(Route,{path:\"/About\",element:/*#__PURE__*/_jsx(About,{baseApiUrl:baseApiUrl})}),/*#__PURE__*/_jsx(Route,{path:\"/user/:slug\",element:/*#__PURE__*/_jsx(User,{avatar:\"https://react.semantic-ui.com/images/avatar/large/matthew.png\",baseApiUrl:baseApiUrl})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(Error,{baseApiUrl:baseApiUrl})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default App;","map":{"version":3,"sources":["/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/components/App/index.js"],"names":["useEffect","useDispatch","Routes","Route","useNavigate","Header","Legal","Footer","ParallaxMain","Columns","About","Playlist","Results","Contact","User","Error","getMusicsList","getUsersList","getLoggedUser","getPlaylistsList","App","dispatch","navigate","baseApiUrl","loggedInUser","localStorage","getItem","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","payload","JSON","parse","slug","handleOnClickUser"],"mappings":"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","sourcesContent":["// == IMPORT NPM \nimport { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport {Routes, Route} from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\n\n// == IMPORT ASSETS\nimport Header from '../Header';\nimport Legal from '../Legal';\nimport Footer from '../Footer';\nimport ParallaxMain from '../Parallax';\nimport Columns from '../Columns';\nimport About from '../About';\nimport Playlist from '../Playlist';\nimport Results from '../Results';\nimport Contact from '../Contact';\nimport User from '../User';\nimport Error from '../Error';\n\n//import SearchBar from '../SearchBar';\nimport './styles.scss';\n\nimport { getMusicsList } from '../../actions/musics';\nimport { getUsersList, getLoggedUser } from '../../actions/user';\nimport { getPlaylistsList } from '../../actions/playlist';\n\nconst App = () => {  \n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const baseApiUrl = 'http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/uploads'\n\n  /*\n  //* useParams used to pickup the slug is the user is not logged\n  const { slug } = useParams();\n  */\n\n  useEffect(\n    () => {\n      dispatch(getMusicsList());\n      dispatch(getUsersList());\n      dispatch(getPlaylistsList());\n    },\n  );\n\n  useEffect(() => {\n    const loggedInUser = localStorage.getItem(\"userToken\");\n    if (loggedInUser) {\n      //* DECOMPRESSION OF PAYLOAD\n      let base64Url = loggedInUser.split('.')[1];\n      let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      let jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {\n          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n      }).join(''));\n\n      let payload =  JSON.parse(jsonPayload);      \n\n      //console.log('Je suis le payload du get logged user: ' , payload);\n      dispatch(getLoggedUser(payload.slug));\n      }\n    },\n  );\n\n  const handleOnClickUser = (slug) => {\n    // dispatch(getUserWithSlug(slug));\n    navigate(`/user/${slug}`);\n  }\n\n  return(\n  \n    <div className=\"App\">\n      <Header />\n      <Routes>\n        <Route path='/' element= { \n        <>\n          <ParallaxMain />\n          <Columns \n            handleOnClickUser = {handleOnClickUser}\n            baseApiUrl={baseApiUrl}\n          />\n        </>\n        }/>\n        <Route \n          path='/legal' \n          element={<Legal baseApiUrl={baseApiUrl}/>} \n        />\n        <Route \n          path='/contact' \n          element={<Contact baseApiUrl={baseApiUrl} />} \n        />\n        <Route\n          path='/results' \n          element={<Results baseApiUrl={baseApiUrl} />} \n        />\n        <Route \n          path='/playlist/:playlist' \n          element={<Playlist baseApiUrl={baseApiUrl} />} \n        />\n        <Route \n          path='/About' \n          element={<About baseApiUrl={baseApiUrl} />} \n        />\n        <Route \n          path='/user/:slug' \n          element={<User \n            avatar='https://react.semantic-ui.com/images/avatar/large/matthew.png'\n            baseApiUrl={baseApiUrl}\n            />} \n          \n        />\n        <Route \n          path='/*' \n          element={<Error baseApiUrl={baseApiUrl} />} \n        />\n      </Routes>\n      <Footer />\n\n\n    </div>\n\n);\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}