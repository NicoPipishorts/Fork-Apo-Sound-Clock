{"ast":null,"code":"var _jsxFileName = \"/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/components/Header/NavBar.js\",\n    _s = $RefreshSig$();\n\n// IMPORT NPM\nimport React from \"react\";\nimport { Icon, Button } from \"semantic-ui-react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\"; // IMPORT ASSETS\n\nimport SearchBar from \"../SearchBar\";\nimport ModalCreate from \"./ModalCreate\";\nimport ModalConnexion from \"./ModalConnexion\";\nimport { setUserField, login, creatUser, logout, getUserWithSlug } from '../../actions/user';\nimport { search, setResearchField } from \"../../actions/research\";\nimport Logo from './logo-v.png';\nimport \"./styles.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NavBar = _ref => {\n  _s();\n\n  let {\n    research\n  } = _ref;\n  const dispatch = useDispatch();\n  const navigate = useNavigate(); // on récupère depuis le store les valeurs courantes\n  // d'email et password\n\n  const username = useSelector(state => state.users.username);\n  const password = useSelector(state => state.users.password);\n  const userData = useSelector(state => state.users.user);\n  const logged = useSelector(state => state.users.logged);\n  const errorCode = useSelector(state => state.users.errorCodeMail);\n\n  const changeField = (value, name) => {\n    dispatch(setUserField(value, name));\n  };\n\n  const handleLogin = () => {\n    dispatch(login()); // console.log('etape : 2, je passe par le handleLogin vers le middleware login');\n  };\n\n  const handleCreate = () => {\n    dispatch(creatUser());\n  };\n\n  const handleLogout = () => {\n    dispatch(logout());\n    navigate('/');\n    window.location.reload();\n  };\n\n  const changeFieldSearch = (value, name) => {\n    dispatch(setResearchField(value, name));\n  };\n\n  const handleSearch = () => {\n    dispatch(search());\n  };\n\n  const handleOnClickUser = () => {\n    dispatch(getUserWithSlug(userData.slug));\n    navigate(`/user/${userData.slug}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"navbar__container\",\n    children: [/*#__PURE__*/_jsxDEV(NavLink, {\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar__logo\",\n        style: {\n          \"backgroundImage\": `url(${Logo})`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"searchbar-container\",\n      children: /*#__PURE__*/_jsxDEV(SearchBar, {\n        research: research,\n        changeField: changeFieldSearch,\n        handleSearch: handleSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar__buttons-container\",\n      children: [!logged && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(ModalCreate, {\n            errorCode: errorCode,\n            username: username,\n            password: password,\n            email: userData.email,\n            changeField: changeField,\n            handleCreate: handleCreate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(ModalConnexion, {\n            username: username,\n            password: password,\n            changeField: changeField,\n            handleLogin: handleLogin\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true), logged && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleOnClickUser,\n          className: \"navbar__buttons--user\",\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            name: \"user circle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), userData.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"teal\",\n          animated: \"fade\",\n          onClick: handleLogout,\n          className: \"navbar__buttons--logout\",\n          children: [/*#__PURE__*/_jsxDEV(Button.Content, {\n            className: \"navbar__buttons--logout\",\n            visible: true,\n            children: /*#__PURE__*/_jsxDEV(Icon, {\n              name: \"log out\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 73\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button.Content, {\n            className: \"navbar__buttons--icon\",\n            hidden: true,\n            children: /*#__PURE__*/_jsxDEV(Icon, {\n              name: \"lock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 70\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NavBar, \"0wwF0KXCOzc3lOUkjrp7udpN2xA=\", false, function () {\n  return [useDispatch, useNavigate, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = NavBar;\nexport default NavBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"NavBar\");","map":{"version":3,"sources":["/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/components/Header/NavBar.js"],"names":["React","Icon","Button","NavLink","useNavigate","useSelector","useDispatch","SearchBar","ModalCreate","ModalConnexion","setUserField","login","creatUser","logout","getUserWithSlug","search","setResearchField","Logo","NavBar","research","dispatch","navigate","username","state","users","password","userData","user","logged","errorCode","errorCodeMail","changeField","value","name","handleLogin","handleCreate","handleLogout","window","location","reload","changeFieldSearch","handleSearch","handleOnClickUser","slug","email"],"mappings":"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","sourcesContent":["// IMPORT NPM\nimport React from \"react\";\nimport { Icon, Button  } from \"semantic-ui-react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\n// IMPORT ASSETS\nimport SearchBar from \"../SearchBar\";\nimport ModalCreate from \"./ModalCreate\";\nimport ModalConnexion from \"./ModalConnexion\";\nimport { setUserField, login, creatUser, logout, getUserWithSlug } from '../../actions/user';\nimport { search, setResearchField } from \"../../actions/research\";\nimport Logo from './logo-v.png';\nimport \"./styles.scss\";\n\nconst NavBar = ({research}) => {\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  // on récupère depuis le store les valeurs courantes\n  // d'email et password\n  const username = useSelector((state) => state.users.username);\n  const password = useSelector((state) => state.users.password);\n  const userData = useSelector((state) => state.users.user);\n\n  const logged = useSelector((state) => state.users.logged);\n  const errorCode = useSelector((state) => state.users.errorCodeMail);\n  \n\n  const changeField = (value, name) => {\n    dispatch(setUserField(value, name));\n  };\n\n  const handleLogin = () => {\n    dispatch(login());\n    // console.log('etape : 2, je passe par le handleLogin vers le middleware login');\n  };\n  const handleCreate = () => {\n    dispatch(creatUser())\n  }\n  const handleLogout = () => {\n    dispatch(logout());    \n    navigate('/');\n    window.location.reload(); \n  }\n  const changeFieldSearch = (value, name) => {\n    dispatch(setResearchField(value, name));\n  };\n  const handleSearch = () => {\n    dispatch(search());\n  }\n\n  const handleOnClickUser = () => {\n    dispatch(getUserWithSlug(userData.slug));\n    navigate(`/user/${userData.slug}`);\n  }\n  \n  return( \n    <nav className=\"navbar__container\">\n\n      <NavLink to=\"/\">\n      <div className=\"navbar__logo\" style={{ \"backgroundImage\": `url(${Logo})` }} />\n      </NavLink>  \n\n      <div className=\"searchbar-container\">\n        <SearchBar\n          research={research}\n          changeField={changeFieldSearch}\n          handleSearch={handleSearch}\n        />\n        \n      </div>\n      \n      <div className=\"navbar__buttons-container\">\n        {/* Account Creation and Login button, only visible if not connected to account */}\n        \n        {(!logged) && \n        <>\n          <div>\n          <ModalCreate \n            errorCode={errorCode}\n            username={username}\n            password={password}\n            email={userData.email}\n            changeField={changeField}\n            handleCreate={handleCreate}\n          />\n        </div>\n        <div>\n          <ModalConnexion \n            username={username}\n            password={password}\n            changeField={changeField}\n            handleLogin={handleLogin}\n          />\n  \n        </div>\n        </>\n        }\n        {(logged) && \n\n          <>\n          <Button onClick={handleOnClickUser} className='navbar__buttons--user'>\n            <Icon name=\"user circle\" />\n            {userData.name}\n          </Button>\n          \n          <Button color=\"teal\" animated='fade' onClick={handleLogout} className='navbar__buttons--logout'>\n            <Button.Content className='navbar__buttons--logout' visible><Icon name='log out' /></Button.Content>\n            <Button.Content className='navbar__buttons--icon' hidden><Icon name='lock' /></Button.Content>\n          </Button>\n        </>    \n        }\n\n    \n        \n        {/* Hidden button that will show only once logged in\n        <div>\n        <Button color=\"teal\" size=\"big\">\n          <Icon name=\"user circle\" />\n          Login\n        </Button>\n        </div>\n        */}\n      </div>\n\n    </nav>\n  );\n\n}\n\nexport default NavBar;"]},"metadata":{},"sourceType":"module"}