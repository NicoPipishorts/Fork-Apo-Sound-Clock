{"ast":null,"code":"// == IMPORT NPM\nimport axios from \"axios\";\nimport FormData from \"form-data\"; // == IMPORT ASSETS\n\nimport { GET_MUSICS_LIST, setMusicsList, SEND_MUSIC } from '../actions/musics';\n\nconst musicApi = store => next => action => {\n  //const picture = \"test-picture\";\n  //const file = \"test-file\";\n  const {\n    musics: {\n      title,\n      file,\n      picture,\n      description,\n      releaseDate\n    }\n  } = store.getState();\n  const formData = new FormData();\n  formData.append('title', title);\n  formData.append('file', file);\n  formData.append('picture', picture);\n  formData.append('releasedate', releaseDate);\n  formData.append('description', description);\n  const config = {\n    headers: {\n      \"Content-type\": \"multipart/form-data\"\n    }\n  };\n\n  switch (action.type) {\n    case GET_MUSICS_LIST:\n      axios.get('http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/musics').then(response => {\n        console.log(response); //console.log('La liste des musiques',response);\n\n        store.dispatch(setMusicsList(response.data));\n      }).catch(error => {\n        // eslint-disable-next-line no-console\n        console.log('error', error);\n      });\n      break;\n\n    case SEND_MUSIC:\n      //for (var value of formData.values()) {\n      //  console.log('la value',value);\n      //}\n      //console.log('cest quoi quon envoie', file);\n      axios.post('http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/musics', formData, config).then(response => {\n        console.log('Le data a était envoyé, all is good.', response); //store.dispatch(setMusicsList(response.data));\n      }).catch(error => {\n        // eslint-disable-next-line no-console\n        console.log('error post', error);\n      });\n      break;\n\n    default:\n      next(action);\n  }\n};\n\nexport default musicApi;","map":{"version":3,"sources":["/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/middlewares/musicApi.js"],"names":["axios","FormData","GET_MUSICS_LIST","setMusicsList","SEND_MUSIC","musicApi","store","next","action","musics","title","file","picture","description","releaseDate","getState","formData","append","config","headers","type","get","then","response","console","log","dispatch","data","catch","error","post"],"mappings":"AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB,C,CAEA;;AACA,SACIC,eADJ,EACqBC,aADrB,EACoCC,UADpC,QAEO,mBAFP;;AAIA,MAAMC,QAAQ,GAAIC,KAAD,IAAYC,IAAD,IAAWC,MAAD,IAAW;AAE/C;AACA;AACA,QAAM;AAAEC,IAAAA,MAAM,EAAE;AACdC,MAAAA,KADc;AAEdC,MAAAA,IAFc;AAGdC,MAAAA,OAHc;AAIdC,MAAAA,WAJc;AAKdC,MAAAA;AALc;AAAV,MAMER,KAAK,CAACS,QAAN,EANR;AAQE,QAAMC,QAAQ,GAAG,IAAIf,QAAJ,EAAjB;AACAe,EAAAA,QAAQ,CAACC,MAAT,CAAgB,OAAhB,EAAyBP,KAAzB;AACAM,EAAAA,QAAQ,CAACC,MAAT,CAAgB,MAAhB,EAAwBN,IAAxB;AACAK,EAAAA,QAAQ,CAACC,MAAT,CAAgB,SAAhB,EAA2BL,OAA3B;AACAI,EAAAA,QAAQ,CAACC,MAAT,CAAgB,aAAhB,EAA+BH,WAA/B;AACAE,EAAAA,QAAQ,CAACC,MAAT,CAAgB,aAAhB,EAA+BJ,WAA/B;AAEA,QAAMK,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AADI,GAAf;;AAMF,UAAQX,MAAM,CAACY,IAAf;AACE,SAAKlB,eAAL;AACEF,MAAAA,KAAK,CAACqB,GAAN,CAAU,kFAAV,EACCC,IADD,CACOC,QAAD,IAAc;AAClBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ,EADkB,CAEhB;;AACAjB,QAAAA,KAAK,CAACoB,QAAN,CAAevB,aAAa,CAACoB,QAAQ,CAACI,IAAV,CAA5B;AACD,OALH,EAMCC,KAND,CAMQC,KAAD,IAAW;AACd;AACAL,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBI,KAArB;AACD,OATH;AAUA;;AACA,SAAKzB,UAAL;AACE;AACA;AACA;AACA;AACAJ,MAAAA,KAAK,CAAC8B,IAAN,CACA,kFADA,EAEAd,QAFA,EAGAE,MAHA,EAGQI,IAHR,CAGcC,QAAD,IAAc;AAEvBC,QAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ,EAAmDF,QAAnD,EAFuB,CAGvB;AACD,OAPH,EAQCK,KARD,CAQQC,KAAD,IAAW;AACd;AACAL,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BI,KAA1B;AACD,OAXH;AAYA;;AACJ;AACAtB,MAAAA,IAAI,CAACC,MAAD,CAAJ;AAhCF;AAkCD,CA3DD;;AA4DA,eAAeH,QAAf","sourcesContent":["// == IMPORT NPM\nimport axios from \"axios\";\nimport FormData from \"form-data\";\n\n// == IMPORT ASSETS\nimport {\n    GET_MUSICS_LIST, setMusicsList, SEND_MUSIC\n} from '../actions/musics';\n\nconst musicApi = (store) => (next) => (action) =>{\n\n  //const picture = \"test-picture\";\n  //const file = \"test-file\";\n  const { musics: { \n    title, \n    file,\n    picture,\n    description,\n    releaseDate,\n    } } = store.getState();\n      \n    const formData = new FormData();\n    formData.append('title', title);\n    formData.append('file', file);\n    formData.append('picture', picture);\n    formData.append('releasedate', releaseDate);\n    formData.append('description', description);\n\n    const config = {\n      headers: {\n        \"Content-type\": \"multipart/form-data\"\n      }\n    };\n\n  switch (action.type) {\n    case GET_MUSICS_LIST: \n      axios.get('http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/musics')\n      .then((response) => {\n        console.log(response);\n          //console.log('La liste des musiques',response);\n          store.dispatch(setMusicsList(response.data));\n        })\n      .catch((error) => {\n          // eslint-disable-next-line no-console\n          console.log('error', error);\n        }); \n      break;\n      case SEND_MUSIC: \n        //for (var value of formData.values()) {\n        //  console.log('la value',value);\n        //}\n        //console.log('cest quoi quon envoie', file);\n        axios.post(\n        'http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/api/musics',\n        formData, \n        config).then((response) => {\n\n            console.log('Le data a était envoyé, all is good.',response);\n            //store.dispatch(setMusicsList(response.data));\n          })\n        .catch((error) => {\n            // eslint-disable-next-line no-console\n            console.log('error post', error);\n          }); \n        break;\n    default:\n    next(action);   \n  }\n};\nexport default musicApi;"]},"metadata":{},"sourceType":"module"}