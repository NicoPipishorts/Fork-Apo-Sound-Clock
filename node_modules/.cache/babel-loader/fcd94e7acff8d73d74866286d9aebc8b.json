{"ast":null,"code":"var _jsxFileName = \"/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/components/Header/NavBar.js\",\n    _s = $RefreshSig$();\n\n// IMPORT NPM\nimport React from \"react\";\nimport { Icon, Button } from \"semantic-ui-react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\"; // IMPORT ASSETS\n\nimport SearchBar from \"../SearchBar\";\nimport ModalCreate from \"./ModalCreate\";\nimport ModalConnexion from \"./ModalConnexion\";\nimport { setUserField, login, creatUser, logout, getUserWithSlug } from '../../actions/user';\nimport { search, setResearchField } from \"../../actions/research\";\nimport Logo from './logo-v.png';\nimport \"./styles.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NavBar = _ref => {\n  _s();\n\n  let {\n    research\n  } = _ref;\n  const dispatch = useDispatch();\n  const navigate = useNavigate(); // on récupère depuis le store les valeurs courantes\n  // d'email et password\n\n  const email = useSelector(state => state.users.email);\n  const name = useSelector(state => state.users.name);\n  const password = useSelector(state => state.users.password);\n  const userData = useSelector(state => state.users.user);\n  const logged = useSelector(state => state.users.logged);\n  const errorCode = useSelector(state => state.users.errorCodeMail);\n  const role = useSelector(state => state.users.user.roles);\n\n  const changeField = (value, name) => {\n    dispatch(setUserField(value, name));\n  };\n\n  const handleLogin = () => {\n    dispatch(login()); // console.log('etape : 2, je passe par le handleLogin vers le middleware login');\n  };\n\n  const handleCreate = () => {\n    dispatch(creatUser());\n  };\n\n  const handleLogout = () => {\n    dispatch(logout());\n    navigate('/');\n    window.location.reload();\n  };\n\n  const changeFieldSearch = (value, name) => {\n    dispatch(setResearchField(value, name));\n  };\n\n  const handleSearch = () => {\n    dispatch(search());\n  };\n\n  const handleOnClickUser = () => {\n    dispatch(getUserWithSlug(userData.slug));\n    navigate(`/user/${userData.slug}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"navbar__container\",\n    children: [/*#__PURE__*/_jsxDEV(NavLink, {\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar__logo\",\n        style: {\n          \"backgroundImage\": `url(${Logo})`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"searchbar-container\",\n      children: /*#__PURE__*/_jsxDEV(SearchBar, {\n        research: research,\n        changeField: changeFieldSearch,\n        handleSearch: handleSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar__buttons-container\",\n      children: [!logged && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(ModalCreate, {\n            errorCode: errorCode,\n            username: name,\n            password: password,\n            email: userData.email,\n            changeField: changeField,\n            handleCreate: handleCreate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(ModalConnexion, {\n            email: email,\n            password: password,\n            changeField: changeField,\n            handleLogin: handleLogin\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true), logged && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleOnClickUser,\n          className: \"navbar__buttons--user\",\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            name: \"user circle\",\n            className: \"navbar__buttons--icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"navbar__buttons--user-text\",\n            children: userData.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), role['0'] === 'ROLE_ADMIN' && /*#__PURE__*/_jsxDEV(Button, {\n          href: \"http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/back/user/\",\n          color: \"blue\",\n          className: \"navbar__buttons--admin\",\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            name: \"user secret\",\n            className: \"navbar__buttons--icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"navbar__buttons--user-text\",\n            children: \"Admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"teal\",\n          onClick: handleLogout,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            \"aria-hidden\": \"true\",\n            class: \"log out icon navbar__buttons--icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NavBar, \"l4tnsxk5nvz9H6VNyyl4GSORXAY=\", false, function () {\n  return [useDispatch, useNavigate, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = NavBar;\nexport default NavBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"NavBar\");","map":{"version":3,"sources":["/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/components/Header/NavBar.js"],"names":["React","Icon","Button","NavLink","useNavigate","useSelector","useDispatch","SearchBar","ModalCreate","ModalConnexion","setUserField","login","creatUser","logout","getUserWithSlug","search","setResearchField","Logo","NavBar","research","dispatch","navigate","email","state","users","name","password","userData","user","logged","errorCode","errorCodeMail","role","roles","changeField","value","handleLogin","handleCreate","handleLogout","window","location","reload","changeFieldSearch","handleSearch","handleOnClickUser","slug"],"mappings":"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","sourcesContent":["// IMPORT NPM\nimport React from \"react\";\nimport { Icon, Button  } from \"semantic-ui-react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\n// IMPORT ASSETS\nimport SearchBar from \"../SearchBar\";\nimport ModalCreate from \"./ModalCreate\";\nimport ModalConnexion from \"./ModalConnexion\";\nimport { setUserField, login, creatUser, logout, getUserWithSlug } from '../../actions/user';\nimport { search, setResearchField } from \"../../actions/research\";\nimport Logo from './logo-v.png';\nimport \"./styles.scss\";\n\nconst NavBar = ({research}) => {\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  // on récupère depuis le store les valeurs courantes\n  // d'email et password\n  const email = useSelector((state) => state.users.email);\n  const name = useSelector((state) => state.users.name);\n  const password = useSelector((state) => state.users.password);\n  const userData = useSelector((state) => state.users.user);\n\n  const logged = useSelector((state) => state.users.logged);\n  const errorCode = useSelector((state) => state.users.errorCodeMail);\n\n  const role = useSelector((state) => state.users.user.roles);\n\n  const changeField = (value, name) => {\n    dispatch(setUserField(value, name));\n  };\n\n  const handleLogin = () => {\n    dispatch(login());\n    // console.log('etape : 2, je passe par le handleLogin vers le middleware login');\n \n  };\n  const handleCreate = () => {\n    dispatch(creatUser())\n  }\n  const handleLogout = () => {\n    dispatch(logout());    \n    navigate('/');\n    window.location.reload(); \n  }\n  const changeFieldSearch = (value, name) => {\n    dispatch(setResearchField(value, name));\n  };\n  const handleSearch = () => {\n    dispatch(search());\n  }\n\n  const handleOnClickUser = () => {\n    dispatch(getUserWithSlug(userData.slug));\n    navigate(`/user/${userData.slug}`);\n  }\n  \n  return( \n    <nav className=\"navbar__container\">\n\n      <NavLink to=\"/\">\n      <div className=\"navbar__logo\" style={{ \"backgroundImage\": `url(${Logo})` }} />\n      </NavLink>  \n\n      <div className=\"searchbar-container\">\n        <SearchBar\n          research={research}\n          changeField={changeFieldSearch}\n          handleSearch={handleSearch}\n        />\n        \n      </div>\n      \n      <div className=\"navbar__buttons-container\">\n        {/* Account Creation and Login button, only visible if not connected to account */}\n        {(!logged) && \n        <>\n          <div>\n          <ModalCreate \n            errorCode={errorCode}\n            username={name}\n            password={password}\n            email={userData.email}\n            changeField={changeField}\n            handleCreate={handleCreate}\n          />\n        </div>\n        <div>\n          <ModalConnexion \n            email={email}\n            password={password}\n            changeField={changeField}\n            handleLogin={handleLogin}\n          />\n  \n        </div>\n        </>\n        }\n        {(logged) && \n\n          <>\n          <Button onClick={handleOnClickUser} className='navbar__buttons--user'>\n            <Icon name=\"user circle\" className='navbar__buttons--icon' />\n            <span className=\"navbar__buttons--user-text\">{userData.name}</span>\n          </Button>\n        \n          {(role['0'] === 'ROLE_ADMIN') &&\n          <Button \n            href=\"http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public/back/user/\" color=\"blue\" className=\"navbar__buttons--admin\">\n            <Icon name=\"user secret\" className='navbar__buttons--icon' />\n            <span className=\"navbar__buttons--user-text\">Admin</span>\n          </Button>\n          }\n          \n          <Button color=\"teal\" onClick={handleLogout}>\n          <i aria-hidden=\"true\" class=\"log out icon navbar__buttons--icon\"></i>\n          </Button>\n        </>    \n        }\n        \n      </div>\n\n    </nav>\n  );\n\n}\n\nexport default NavBar;"]},"metadata":{},"sourceType":"module"}