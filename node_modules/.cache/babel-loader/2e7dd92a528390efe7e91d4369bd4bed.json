{"ast":null,"code":"// == IMPORT NPM\nimport axios from\"axios\";// == IMPORT ASSETS\nimport{CREATE_USER,GET_USERS_LIST,setErrorMailCreate,setUsersList}from'../actions/user';var usersApi=function usersApi(store){return function(next){return function(action){var _store$getState=store.getState(),_store$getState$users=_store$getState.users,email=_store$getState$users.email,name=_store$getState$users.name,password=_store$getState$users.password;var config={headers:{\"Content-type\":\"application/json\"}};var baseURL='http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public';switch(action.type){case CREATE_USER:axios.post(\"\".concat(baseURL,\"/api/user/new\"),{email:email,name:name,password:password},config).then(function(response){console.log('Le data a était envoyé, all is good.',response);}).catch(function(error){store.dispatch(setErrorMailCreate(error.response.data.error));console.log(\"je suis la reponse.status\",error.response.data.error);console.log('error nul',error);});break;case GET_USERS_LIST:axios.get(\"\".concat(baseURL,\"/api/users/rand\")).then(function(response){store.dispatch(setUsersList(response.data));}).catch(function(error){// eslint-disable-next-line no-console\nconsole.log('error',error);});break;default:next(action);}};};};export default usersApi;","map":{"version":3,"sources":["/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/middlewares/usersApi.js"],"names":["axios","CREATE_USER","GET_USERS_LIST","setErrorMailCreate","setUsersList","usersApi","store","next","action","getState","users","email","name","password","config","headers","baseURL","type","post","then","response","console","log","catch","error","dispatch","data","get"],"mappings":"AAAA;AACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA;AACA,OACEC,WADF,CAEEC,cAFF,CAGEC,kBAHF,CAIEC,YAJF,KAKO,iBALP,CAOA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,QAAW,UAACC,IAAD,QAAU,UAACC,MAAD,CAAW,CAE/C,oBAIKF,KAAK,CAACG,QAAN,EAJL,uCAAQC,KAAR,CACEC,KADF,uBACEA,KADF,CAEEC,IAFF,uBAEEA,IAFF,CAGEC,QAHF,uBAGEA,QAHF,CAMA,GAAMC,CAAAA,MAAM,CAAG,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CAAf,CAMA,GAAMC,CAAAA,OAAO,CAAG,uEAAhB,CAEA,OAAQR,MAAM,CAACS,IAAf,EAEE,IAAKhB,CAAAA,WAAL,CACED,KAAK,CAACkB,IAAN,WAAcF,OAAd,kBAAuC,CACrCL,KAAK,CAALA,KADqC,CAErCC,IAAI,CAAJA,IAFqC,CAGrCC,QAAQ,CAARA,QAHqC,CAAvC,CAIGC,MAJH,EAKIK,IALJ,CAKS,SAACC,QAAD,CAAc,CACnBC,OAAO,CAACC,GAAR,CAAY,sCAAZ,CAAmDF,QAAnD,EACD,CAPH,EAQGG,KARH,CAQS,SAACC,KAAD,CAAW,CAChBlB,KAAK,CAACmB,QAAN,CAAetB,kBAAkB,CAACqB,KAAK,CAACJ,QAAN,CAAeM,IAAf,CAAoBF,KAArB,CAAjC,EACAH,OAAO,CAACC,GAAR,CAAY,2BAAZ,CAAwCE,KAAK,CAACJ,QAAN,CAAeM,IAAf,CAAoBF,KAA5D,EACAH,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBE,KAAzB,EACD,CAZH,EAaA,MAEF,IAAKtB,CAAAA,cAAL,CACEF,KAAK,CAAC2B,GAAN,WAAaX,OAAb,qBACCG,IADD,CACM,SAACC,QAAD,CAAc,CAChBd,KAAK,CAACmB,QAAN,CAAerB,YAAY,CAACgB,QAAQ,CAACM,IAAV,CAA3B,EACD,CAHH,EAICH,KAJD,CAIO,SAACC,KAAD,CAAW,CACd;AACAH,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBE,KAArB,EACD,CAPH,EAQA,MACF,QACAjB,IAAI,CAACC,MAAD,CAAJ,CA7BF,CA+BD,CA/C2B,EAAX,EAAjB,CAgDA,cAAeH,CAAAA,QAAf","sourcesContent":["// == IMPORT NPM\nimport axios from \"axios\";\n\n// == IMPORT ASSETS\nimport {\n  CREATE_USER,\n  GET_USERS_LIST, \n  setErrorMailCreate, \n  setUsersList,\n} from '../actions/user';\n\nconst usersApi = (store) => (next) => (action) =>{\n\n  const { users : {\n    email,\n    name,\n    password\n  }} = store.getState();\n\n  const config = {\n    headers: {\n      \"Content-type\": \"application/json\"\n    }\n  };\n\n  const baseURL = 'http://denisjulien-server.eddi.cloud/projet-9-sound-clock-back/public';\n\n  switch (action.type) {\n   \n    case CREATE_USER:\n      axios.post(`${baseURL}/api/user/new` , {\n        email,\n        name,\n        password  \n      }, config\n        ).then((response) => {\n          console.log('Le data a était envoyé, all is good.',response);\n        })\n        .catch((error) => {\n          store.dispatch(setErrorMailCreate(error.response.data.error))\n          console.log(\"je suis la reponse.status\",error.response.data.error);\n          console.log('error nul', error);\n        });\n      break;\n\n    case GET_USERS_LIST: \n      axios.get(`${baseURL}/api/users/rand`)\n      .then((response) => {\n          store.dispatch(setUsersList(response.data));\n        })\n      .catch((error) => {\n          // eslint-disable-next-line no-console\n          console.log('error', error);\n        });\n      break;\n    default:\n    next(action);   \n  }\n};\nexport default usersApi;"]},"metadata":{},"sourceType":"module"}