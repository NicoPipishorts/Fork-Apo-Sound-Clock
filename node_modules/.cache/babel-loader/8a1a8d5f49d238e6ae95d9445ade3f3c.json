{"ast":null,"code":"// IMPORT NPM\nimport React from\"react\";import{Icon,Button}from\"semantic-ui-react\";import{NavLink,useNavigate}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";// IMPORT ASSETS\nimport SearchBar from\"../SearchBar\";import ModalCreate from\"./ModalCreate\";import ModalConnexion from\"./ModalConnexion\";import{setUserField,login,creatUser,logout,getUserWithSlug}from'../../actions/user';import{search,setResearchField}from\"../../actions/research\";import Logo from'./logo-v.png';import\"./styles.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavBar=function NavBar(_ref){var research=_ref.research;var dispatch=useDispatch();var navigate=useNavigate();// on récupère depuis le store les valeurs courantes\n// d'email et password\nvar username=useSelector(function(state){return state.users.username;});var password=useSelector(function(state){return state.users.password;});var userData=useSelector(function(state){return state.users.user;});var logged=useSelector(function(state){return state.users.logged;});var errorCode=useSelector(function(state){return state.users.errorCodeMail;});var changeField=function changeField(value,name){dispatch(setUserField(value,name));};var handleLogin=function handleLogin(){dispatch(login());// console.log('etape : 2, je passe par le handleLogin vers le middleware login');\n};var handleCreate=function handleCreate(){dispatch(creatUser());};var handleLogout=function handleLogout(){dispatch(logout());navigate('/');window.location.reload();};var changeFieldSearch=function changeFieldSearch(value,name){dispatch(setResearchField(value,name));};var handleSearch=function handleSearch(){dispatch(search());};var handleOnClickUser=function handleOnClickUser(){dispatch(getUserWithSlug(userData.slug));navigate(\"/user/\".concat(userData.slug));};return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar__container\",children:[/*#__PURE__*/_jsx(NavLink,{to:\"/\",children:/*#__PURE__*/_jsx(\"div\",{className:\"navbar__logo\",style:{\"backgroundImage\":\"url(\".concat(Logo,\")\")}})}),/*#__PURE__*/_jsx(\"div\",{className:\"searchbar-container\",children:/*#__PURE__*/_jsx(SearchBar,{research:research,changeField:changeFieldSearch,handleSearch:handleSearch})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar__buttons-container\",children:[!logged&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ModalCreate,{errorCode:errorCode,username:username,password:password,email:userData.email,changeField:changeField,handleCreate:handleCreate})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ModalConnexion,{username:username,password:password,changeField:changeField,handleLogin:handleLogin})})]}),logged&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Button,{onClick:handleOnClickUser,color:\"orange\",size:\"big\",children:[/*#__PURE__*/_jsx(Icon,{name:\"user circle\"}),userData.name]}),/*#__PURE__*/_jsxs(Button,{color:\"teal\",animated:\"fade\",size:\"big\",onClick:handleLogout,children:[/*#__PURE__*/_jsx(Button.Content,{visible:true,children:/*#__PURE__*/_jsx(Icon,{name:\"log out\"})}),/*#__PURE__*/_jsx(Button.Content,{hidden:true,children:/*#__PURE__*/_jsx(Icon,{name:\"lock\"})})]})]})]})]});};export default NavBar;","map":{"version":3,"sources":["/Users/nicolaspisar/Sites/_OClock/react/Apo/projet-9-sound-clock-front/src/components/Header/NavBar.js"],"names":["React","Icon","Button","NavLink","useNavigate","useSelector","useDispatch","SearchBar","ModalCreate","ModalConnexion","setUserField","login","creatUser","logout","getUserWithSlug","search","setResearchField","Logo","NavBar","research","dispatch","navigate","username","state","users","password","userData","user","logged","errorCode","errorCodeMail","changeField","value","name","handleLogin","handleCreate","handleLogout","window","location","reload","changeFieldSearch","handleSearch","handleOnClickUser","slug","email"],"mappings":"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","sourcesContent":["// IMPORT NPM\nimport React from \"react\";\nimport { Icon, Button  } from \"semantic-ui-react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\n// IMPORT ASSETS\nimport SearchBar from \"../SearchBar\";\nimport ModalCreate from \"./ModalCreate\";\nimport ModalConnexion from \"./ModalConnexion\";\nimport { setUserField, login, creatUser, logout, getUserWithSlug } from '../../actions/user';\nimport { search, setResearchField } from \"../../actions/research\";\nimport Logo from './logo-v.png';\nimport \"./styles.scss\";\n\nconst NavBar = ({research}) => {\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  // on récupère depuis le store les valeurs courantes\n  // d'email et password\n  const username = useSelector((state) => state.users.username);\n  const password = useSelector((state) => state.users.password);\n  const userData = useSelector((state) => state.users.user);\n\n  const logged = useSelector((state) => state.users.logged);\n  const errorCode = useSelector((state) => state.users.errorCodeMail);\n  \n\n  const changeField = (value, name) => {\n    dispatch(setUserField(value, name));\n  };\n\n  const handleLogin = () => {\n    dispatch(login());\n    // console.log('etape : 2, je passe par le handleLogin vers le middleware login');\n  };\n  const handleCreate = () => {\n    dispatch(creatUser())\n  }\n  const handleLogout = () => {\n    dispatch(logout());    \n    navigate('/');\n    window.location.reload(); \n  }\n  const changeFieldSearch = (value, name) => {\n    dispatch(setResearchField(value, name));\n  };\n  const handleSearch = () => {\n    dispatch(search());\n  }\n\n  const handleOnClickUser = () => {\n    dispatch(getUserWithSlug(userData.slug));\n    navigate(`/user/${userData.slug}`);\n  }\n  \n  return( \n    <nav className=\"navbar__container\">\n\n      <NavLink to=\"/\">\n      <div className=\"navbar__logo\" style={{ \"backgroundImage\": `url(${Logo})` }} />\n      </NavLink>  \n\n      <div className=\"searchbar-container\">\n        <SearchBar\n          research={research}\n          changeField={changeFieldSearch}\n          handleSearch={handleSearch}\n        />\n        \n      </div>\n      \n      <div className=\"navbar__buttons-container\">\n        {/* Account Creation and Login button, only visible if not connected to account */}\n        \n        {(!logged) && \n        <>\n          <div>\n          <ModalCreate \n            errorCode={errorCode}\n            username={username}\n            password={password}\n            email={userData.email}\n            changeField={changeField}\n            handleCreate={handleCreate}\n          />\n        </div>\n        <div>\n          <ModalConnexion \n            username={username}\n            password={password}\n            changeField={changeField}\n            handleLogin={handleLogin}\n          />\n  \n        </div>\n        </>\n        }\n        {(logged) && \n\n          <>\n          <Button onClick={handleOnClickUser} color=\"orange\" size=\"big\">\n            <Icon name=\"user circle\" />\n            {userData.name}\n          </Button>\n          \n          <Button color=\"teal\" animated='fade' size=\"big\" onClick={handleLogout}>\n            <Button.Content visible><Icon name='log out' /></Button.Content>\n            <Button.Content hidden><Icon name='lock' /></Button.Content>\n          </Button>\n        </>    \n        }\n\n    \n        \n        {/* Hidden button that will show only once logged in\n        <div>\n        <Button color=\"teal\" size=\"big\">\n          <Icon name=\"user circle\" />\n          Login\n        </Button>\n        </div>\n        */}\n      </div>\n\n    </nav>\n  );\n\n}\n\nexport default NavBar;"]},"metadata":{},"sourceType":"module"}